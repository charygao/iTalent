<div ng-if="authenticated" class="container">
    <h2>{{'views.newProject.pageTitle' | translate}}</h2>
    <form name="registrationForm">
        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label class="required">{{'views.newProject.title' | translate}}</label>
                    <input required type="text" ng-model="project.title" class="form-control" placeholder="{{'views.newProject.title' | translate}}" minlength="2" maxlength="100" />
                </div>

                <div class="form-group">
                    <label class="required">{{'views.newProject.description' | translate}}</label>
                    <textarea required ng-model="project.description" class="form-control" rows="10" placeholder="{{'views.newProject.description' | translate}}" maxlength="1000"></textarea>
                </div>

                <div class="form-group">
                    <label class="required">{{'views.newProject.shortDescription' | translate}}</label>
                    <textarea required ng-model="project.shortDescription" class="form-control" rows="5" placeholder="{{'views.newProject.shortDescription' | translate}}" maxlength="200"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="required">{{'views.newProject.public' | translate}}</label>
                    <input type="checkbox" ng-model="project.public" ng-checked="project.public" class="form-control"></input>
                </div>
                
                <div class="form-group">
                    <label class="required">{{'views.newProject.category' | translate}}</label>
						<tags-input ng-model="project.categories" add-on-paste="true" style="display:inline;">
					    	<auto-complete source="loadTags($query)"></auto-complete> 
					    </tags-input>
                </div>

                <div class="form-group">
                    <label class="required">{{'views.newProject.domain' | translate}}</label>
                    <select ng-options="domain as domain.name for domain in domains track by domain.domainId" ng-model="project.domain" required class="form-control"></select>
                </div>

            </div>

            <div class="col-md-6">
                <!--Project movies-->
                <div class="row">
                    <label>{{'views.newProject.movies' | translate}}</label>
                </div>
                <div ng-repeat="movie in project.movies">
                    <p>
                    <div class="form-horizontal">
                        <div class="col-md-10">
                            <input type="text" ng-model="movie.description" class="form-control" placeholder="{{'views.newProject.description' | translate}}"
                                   ng-minlength="2" ng-maxlength="500"/>
                        </div>
                        <div class="col-md-2">
                            <button ng-click="removeMovie(movie)" class="btn btn-default" title="{{'views.newProject.delete' | translate}}">
                                <i class="glyphicon glyphicon-trash"></i></button>
                        </div>
                    </div>
                    <div class="form-inline">
                        <label>https://www.youtube.com/watch?v=</label>
                        <input type="text" ng-model="movie.youTubeCode" class="form-control" placeholder="youtube-id" ng-minlength="11" ng-maxlength="11"/>
                    </div>
                    </p>
                </div>
                <div class="row text-center">
                    <button class="btn btn-primary btn-primary-detail" ng-click="addMovie()">{{'views.newProject.addMovie' | translate}}
                    </button>
                </div>

                <!--Project pictures-->
                <div class="row">
                    <label>{{'views.newProject.pictures' | translate}}</label>
                </div>
                <div ng-repeat="picture in project.pictures">
                    <p>
                    <div class="form-horizontal">
                        <div class="col-md-10">
                            <input type="text" ng-model="picture.description" class="form-control" placeholder="{{'views.newProject.description' | translate}}"
                               ng-minlength="2" ng-maxlength="500"/>
                        </div>
                        <div class="col-md-2">
                            <button ng-click="removePicture(picture)" class="btn btn-default" title="{{'views.newProject.delete' | translate}}">
                                <i class="glyphicon glyphicon-trash"></i></button>
                        </div>
                    </div>
                    <div class="form-inline">
                        <input type="file" id="project_picture_{{ $index }}" accept="image/*" ng-model="dummy" index="{{ $index }}"
                               onchange="angular.element(this).scope().convertImage(this)" />
                    </div>
                    </p>
                </div>
                <div class="row text-center">
                    <button class="btn btn-primary btn-primary-detail" ng-click="addPicture()">{{'views.newProject.addPicture' | translate}}
                    </button>
                </div>

                <!--Project milestones-->
                <div class="row">
                    <label>{{'views.newProject.milestones' | translate}}</label>
                </div>
                <div ng-repeat="milestone in project.milestones">
                    <div class="form-horizontal">
                        <div class="col-md-10">
                            <input type="text" ng-model="milestone.description" class="form-control" placeholder="{{'views.newProject.milestone' | translate}}"
                                   ng-minlength="2" ng-maxlength="500"/>
                        </div>
                        <div class="col-md-2">
                            <button ng-click="removeMilestone(milestone)" class="btn btn-default" title="{{'views.newProject.delete' | translate}}">
                                <i class="glyphicon glyphicon-trash"></i></button>
                        </div>
                    </div>
                </div>
                <div class="row text-center">
                    <button class="btn btn-primary btn-primary-detail" ng-click="addMilestone()">{{'views.newProject.addMilestone' | translate}}
                    </button>
                </div>

                <!--TODO rearrange other inputs-->
                <div class="form-group">
                    <label>{{'views.newProject.wantedSubscribers' | translate}}</label>
	               	<div ng-repeat="picture in project.wantedSubscribers track by $index">
	               		<select id="project_wantedSubscriber_department_{{ $index }}" class="form-control" ng-options="department as department.name for department in departments track by department.id" ng-model="selection"></select>
	               		<input type="number" id="project_wantedSubscriber_number_{{ $index }}" class="form-control" placeholder="number" />
	               	</div>
                	<button class="btn btn-primary" ng-click="addWantedSubscriber()">{{'views.newProject.addWantedSubscriber' | translate}}</button>
                </div>
                
                <div class="form-group">
                    <label>{{'views.newProject.prezis' | translate}}</label>
	               	<div ng-repeat="prezi in project.prezis track by $index">
	               		https://www.prezi.com/
	               		<input type="text" id="project_prezi_{{ $index }}" class="form-control" placeholder="prezi-id" minlength="5" maxlength="100" />
	               		<input  type="text" id="project_prezi_descr_{{ $index }}" class="form-control" placeholder="description" minlength="2" maxlength="500" />
	               	</div>
                	<button type="button" class="btn btn-primary" ng-click="addPrezi()">{{'views.newProject.addPrezi' | translate}}</button>
                </div>
                
                <div class="form-group">
                    <label>{{'views.newProject.onlineFiles' | translate}}</label>
	               	<div ng-repeat="onlineFile in project.onlineFiles track by $index">
	               		URL:
	               		<input type="text" id="project_onlineFile_{{ $index }}" class="form-control" placeholder="url" minlength="5" maxlength="100" />
	               		<input  type="text" id="project_onlineFile_descr_{{ $index }}" class="form-control" placeholder="description" minlength="2" maxlength="500" />
	               	</div>
                	<button type="button" class="btn btn-primary" ng-click="addOnlineFile()">{{'views.newProject.addOnlineFile' | translate}}</button>
                </div>
                     
                <button type="submit" class="btn btn-warning" ng-click="cancel()">{{'views.newProject.cancel' | translate}}</button>
                <button type="submit" class="btn btn-primary" ng-click="save()">{{'views.newProject.save' | translate}}</button>
                <button ng-if="!project.partiallyBacked && project.id>0" type="button" class="btn btn-danger" ng-click="deleteProject()">{{"views.home.delete" | translate}}</button>
            </div>
        </div>
    </form>
</div>